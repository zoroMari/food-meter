"use strict";(self.webpackChunkfood_meter=self.webpackChunkfood_meter||[]).push([[125],{8125:(it,p,a)=>{a.r(p),a.d(p,{IngredientsModule:()=>ot});var g=a(6895),l=a(4006),_=a(1635),f=a(5698),h=a(4004),t=a(4650),u=a(5599);let C=(()=>{class e{constructor(n,o){this._authService=n,this._router=o}canActivate(n,o){return this._authService.user.pipe((0,f.q)(1),(0,h.U)(r=>!!r||this._router.createUrlTree(["/auth"])))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(u.e),t.LFG(_.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=a(3806),I=a(1120),M=a(5805),T=a(7787),b=a(4926),Z=a(3327),v=a(5412),y=a(4859),c=a(7155),N=a(9549),O=a(4144),w=a(7392);function A(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1," Name"),t.qZA())}const m=function(e){return{read:e}};function P(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",18)(1,"mat-form-field",19)(2,"input",20,21),t.NdJ("ngModelChange",function(r){const s=t.CHM(n).$implicit;return t.KtG(s.name=r)}),t.qZA()()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,n.id!==o.editIngrId)),t.xp6(1),t.Q6J("readonly",n.id!==o.editIngrId)("ngModel",n.name)}}function S(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Gram"),t.qZA())}function k(e,i){1&e&&(t.TgZ(0,"td",18),t._uU(1,"100"),t.qZA())}function J(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1," Ccal "),t.qZA())}function Y(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",18)(1,"mat-form-field",22)(2,"input",23,24),t.NdJ("ngModelChange",function(r){const s=t.CHM(n).$implicit;return t.KtG(s.ccal=r)})("keypress",function(r){t.CHM(n);const d=t.oxw();return t.KtG(d.handleValidateNumber(r))}),t.qZA()()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,n.id!==o.editIngrId)),t.xp6(1),t.Q6J("readonly",n.id!==o.editIngrId)("ngModel",n.ccal)}}function Q(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1," Protein "),t.qZA())}function D(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",18)(1,"mat-form-field",25),t.NdJ("keypress",function(r){t.CHM(n);const d=t.oxw();return t.KtG(d.handleValidateNumber(r))}),t.TgZ(2,"input",23,26),t.NdJ("ngModelChange",function(r){const s=t.CHM(n).$implicit;return t.KtG(s.protein=r)})("keypress",function(r){t.CHM(n);const d=t.oxw();return t.KtG(d.handleValidateNumber(r))}),t.qZA()()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,n.id!==o.editIngrId)),t.xp6(1),t.Q6J("readonly",n.id!==o.editIngrId)("ngModel",n.protein)}}function E(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1," Carbon "),t.qZA())}function G(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",18)(1,"mat-form-field",27)(2,"input",23,28),t.NdJ("ngModelChange",function(r){const s=t.CHM(n).$implicit;return t.KtG(s.carbon=r)})("keypress",function(r){t.CHM(n);const d=t.oxw();return t.KtG(d.handleValidateNumber(r))}),t.qZA()()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,n.id!==o.editIngrId)),t.xp6(1),t.Q6J("readonly",n.id!==o.editIngrId)("ngModel",n.carbon)}}function U(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1," Fat "),t.qZA())}function H(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",18)(1,"mat-form-field",29)(2,"input",23,30),t.NdJ("ngModelChange",function(r){const s=t.CHM(n).$implicit;return t.KtG(s.fat=r)})("keypress",function(r){t.CHM(n);const d=t.oxw();return t.KtG(d.handleValidateNumber(r))}),t.qZA()()()}if(2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,m,n.id!==o.editIngrId)),t.xp6(1),t.Q6J("readonly",n.id!==o.editIngrId)("ngModel",n.fat)}}function K(e,i){1&e&&t._UZ(0,"th",17)}function F(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,d=t.oxw();return t.KtG(d.handleEditIngredient(r))})("keypress",function(r){t.CHM(n);const d=t.oxw(2);return t.KtG(d.handleValidateNumber(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function $(e,i){if(1&e&&(t.TgZ(0,"td",18),t.YNc(1,F,3,0,"button",31),t.qZA()),2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",n.id!==o.editIngrId&&!0!==o.isEditMode)}}function B(e,i){1&e&&t._UZ(0,"th",17)}function V(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,d=t.oxw();return t.KtG(d.handleSaveChanges(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"done"),t.qZA()()}}function q(e,i){if(1&e&&(t.TgZ(0,"td",18),t.YNc(1,V,3,0,"button",33),t.qZA()),2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",n.id===o.editIngrId)}}function z(e,i){1&e&&t._UZ(0,"th",17)}function R(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.handleCancelChanges())}),t.TgZ(1,"mat-icon"),t._uU(2,"cancel"),t.qZA()()}}function j(e,i){if(1&e&&(t.TgZ(0,"td",18),t.YNc(1,R,3,0,"button",35),t.qZA()),2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",n.id===o.editIngrId)}}function L(e,i){1&e&&t._UZ(0,"th",17)}function X(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,d=t.oxw();return t.KtG(d.handleDeleteIngredient(r))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function W(e,i){if(1&e&&(t.TgZ(0,"td",18),t.YNc(1,X,3,0,"button",35),t.qZA()),2&e){const n=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",n.id!==o.editIngrId&&!0!==o.isEditMode)}}function tt(e,i){1&e&&t._UZ(0,"tr",37)}function nt(e,i){1&e&&t._UZ(0,"tr",38)}let et=(()=>{class e{constructor(n,o,r,d){this._ingrService=n,this._ingredientStoreService=o,this.dialog=r,this._AuthService=d,this.displayedColumns=["name","gram","ccal","protein","carbon","fat","edit","delete","save","cancel"],this.editIngrId=null}ngOnInit(){this._ingredientStoreService.fetchIngredients(),this._sub=this._ingrService.isEditMode.subscribe(n=>{this.isEditMode=n}),this._sub.add(this._AuthService.user.subscribe(n=>this._isAuthorized=!!n)),this._sub.add(this._ingrService.isEditIngr.subscribe(n=>{this.editIngrId=n?n.id:null})),this._sub.add(this._ingredientStoreService.fetchIngredients().subscribe(n=>{})),this._sub.add(this._ingrService.isIngredientChange.subscribe(n=>{this.dataSource=n}))}ngOnDestroy(){this._sub.unsubscribe()}handleEditIngredient(n){this.isEditMode||this._ingrService.editIngredient(n)}handleSaveChanges(n){this._ingrService.saveChangedIngredient(n),this._ingredientStoreService.storeIngredients(),this._ingredientStoreService.fetchIngredients()}handleCancelChanges(){this._ingrService.cancelChangedIngredient(),this._ingredientStoreService.fetchIngredients()}handleDeleteIngredient(n){this._ingrService.deleteIngredient(n),this._ingredientStoreService.storeIngredients(),this._ingredientStoreService.fetchIngredients()}handleValidateNumber(n){(0,T.H)(n)}openDialog(){this.dialog.open(M.k,{width:"250px",data:{checkbox:!1,calculator:!1,isAuth:this._isAuthorized}}).afterClosed().subscribe(o=>{})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(b.M),t.Y36(Z.q),t.Y36(v.uw),t.Y36(u.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-ingredients"]],decls:40,vars:3,consts:[[1,"buttons"],["mat-raised-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name",1,"name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","gram",1,"gramContainer"],["matColumnDef","ccal"],["matColumnDef","protein"],["matColumnDef","carbon"],["matColumnDef","fat"],["matColumnDef","edit"],["matColumnDef","save"],["matColumnDef","cancel"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["appearance","outline",1,"name",3,"ngClass"],["matInput","","type","text",3,"readonly","ngModel","ngModelChange"],["nameOfElement","ngModel"],["appearance","outline",1,"ccal",3,"ngClass"],["matInput","","type","number","value","0",3,"readonly","ngModel","ngModelChange","keypress"],["ccalOfElement","ngModel"],["appearance","outline",1,"protein",3,"ngClass","keypress"],["proteinOfElement","ngModel"],["appearance","outline",1,"carbon",3,"ngClass"],["carbonOfElement","ngModel"],["appearance","outline",1,"fat",3,"ngClass"],["fatOfElement","ngModel"],["mat-icon-button","","color","primary",3,"click","keypress",4,"ngIf"],["mat-icon-button","","color","primary",3,"click","keypress"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Ingredients"),t.qZA(),t.TgZ(2,"h2"),t._uU(3,"Here is the list of your popular ingredients"),t.qZA(),t.TgZ(4,"div",0)(5,"button",1),t.NdJ("click",function(){return o.openDialog()}),t._uU(6," Create new ingredient "),t.qZA()(),t.TgZ(7,"table",2),t.ynx(8,3),t.YNc(9,A,2,0,"th",4),t.YNc(10,P,4,5,"td",5),t.BQk(),t.ynx(11,6),t.YNc(12,S,2,0,"th",4),t.YNc(13,k,2,0,"td",5),t.BQk(),t.ynx(14,7),t.YNc(15,J,2,0,"th",4),t.YNc(16,Y,4,5,"td",5),t.BQk(),t.ynx(17,8),t.YNc(18,Q,2,0,"th",4),t.YNc(19,D,4,5,"td",5),t.BQk(),t.ynx(20,9),t.YNc(21,E,2,0,"th",4),t.YNc(22,G,4,5,"td",5),t.BQk(),t.ynx(23,10),t.YNc(24,U,2,0,"th",4),t.YNc(25,H,4,5,"td",5),t.BQk(),t.ynx(26,11),t.YNc(27,K,1,0,"th",4),t.YNc(28,$,2,1,"td",5),t.BQk(),t.ynx(29,12),t.YNc(30,B,1,0,"th",4),t.YNc(31,q,2,1,"td",5),t.BQk(),t.ynx(32,13),t.YNc(33,z,1,0,"th",4),t.YNc(34,j,2,1,"td",5),t.BQk(),t.ynx(35,14),t.YNc(36,L,1,0,"th",4),t.YNc(37,W,2,1,"td",5),t.BQk(),t.YNc(38,tt,1,0,"tr",15),t.YNc(39,nt,1,0,"tr",16),t.qZA()),2&n&&(t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[g.mk,g.O5,y.lW,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,N.KE,O.Nt,w.Hw,l.Fj,l.wV,l.JJ,l.On],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:200;padding:12px;margin:48px 0 0}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:200;padding:12px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#673ab7}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-of-type){margin-right:16px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{width:98%;margin-top:32px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:nth-of-type(2)){padding-left:20px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-of-type{padding-left:46px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-column-name{width:240px!important}@media screen and (max-width: 800px){[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-column-name{width:120px!important}}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-column-gram{width:80px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-column-fat{width:auto!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-column-delete{width:32px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:4px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-form-field-wrapper   .mat-form-field-infix{width:100%!important;padding:12px 8px 8px;border:0}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .read[_ngcontent-%COMP%]     .mat-form-field-outline{color:transparent}"]}),e})(),ot=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,x.q,l.u5,I.a,_.Bz.forChild([{path:"",component:et,canActivate:[C]}]),_.Bz]}),e})()}}]);