"use strict";(self.webpackChunkfood_meter=self.webpackChunkfood_meter||[]).push([[259],{2259:(V,p,a)=>{a.r(p),a.d(p,{CalculatorModule:()=>X});var s=a(6895),i=a(4006),C=a(1635),f=a(3806),T=a(1120),t=a(4650);let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,f.q,i.UX,i.u5]}),n})();var b=a(5805),u=a(5412),O=a(4926),h=a(748),_=a(4859),d=a(9549),x=a(4385),v=a(3238);function P(n,o){if(1&n&&(t.TgZ(0,"mat-option",7),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}let Z=(()=>{class n{constructor(e,l,c){this.dialogRef=e,this._ingredientsService=l,this._calculatorService=c,this.form=new i.cw({ingredients:new i.NI(null)}),this.ingrList=[]}ngOnInit(){this.ingrList=this._ingredientsService.ingredients}onNoClick(){this.dialogRef.close()}handleSaveIngredient(){const e=this.form.controls.ingredients.value;e&&(this._calculatorService.addIngredients(e),this.onNoClick())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.so),t.Y36(O.M),t.Y36(h.R))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-ingredient"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["action","",3,"formGroup"],["formControlName","ingredients","multiple",""],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","accent",3,"click"],[3,"value"]],template:function(e,l){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Select ingredients"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Ingredients"),t.qZA(),t.TgZ(7,"mat-select",3),t.YNc(8,P,2,2,"mat-option",4),t.qZA()()()(),t.TgZ(9,"div",5)(10,"button",6),t.NdJ("click",function(){return l.handleSaveIngredient()}),t._uU(11,"Select"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("formGroup",l.form),t.xp6(5),t.Q6J("ngForOf",l.ingrList))},dependencies:[s.sg,_.lW,d.KE,d.hX,u.uh,u.xY,u.H8,x.gD,v.ey,i._Y,i.JJ,i.JL,i.sg,i.u]}),n})();var S=a(3327),A=a(5599),r=a(7155),y=a(4144),I=a(7392),N=a(266);function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.openDialogSelectIngr())}),t._uU(1," Select from ingredients "),t.qZA()}}function w(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1," Name"),t.qZA())}function U(n,o){if(1&n&&(t.TgZ(0,"button",20)(1,"mat-icon"),t._uU(2,"info"),t.qZA()()),2&n){const e=t.oxw().$implicit,l=t.oxw();t.Q6J("matTooltip",l.getTooltipInfo(e))}}function D(n,o){if(1&n&&(t.TgZ(0,"td",17)(1,"div",18)(2,"p"),t._uU(3),t.qZA(),t.YNc(4,U,3,1,"button",19),t.qZA()()),2&n){const e=o.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf","TOTAL:"!==e.name)}}function J(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1,"Gram"),t.qZA())}function Q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",17)(1,"mat-form-field",21)(2,"input",22,23),t.NdJ("ngModelChange",function(c){const g=t.CHM(e).$implicit;return t.KtG(g.actualWeight=c)})("change",function(){const m=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.handleChangeWeight(m))}),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Q6J("readonly","TOTAL:"===e.name)("ngModel",e.actualWeight)}}function $(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1," Ccal "),t.qZA())}function k(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.ccal," ")}}function R(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1," Protein "),t.qZA())}function q(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.protein," ")}}function z(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1," Carbon "),t.qZA())}function B(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.carbon," ")}}function F(n,o){1&n&&(t.TgZ(0,"th",16),t._uU(1," Fat "),t.qZA())}function H(n,o){if(1&n&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.fat," ")}}function j(n,o){1&n&&t._UZ(0,"th",16)}function G(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,m=t.oxw();return t.KtG(m.handleDelIngr(c))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function L(n,o){if(1&n&&(t.TgZ(0,"td",17),t.YNc(1,G,3,0,"button",24),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf","TOTAL:"!==e.name)}}function E(n,o){1&n&&t._UZ(0,"tr",26)}function K(n,o){1&n&&t._UZ(0,"tr",27)}let W=(()=>{class n{constructor(e,l,c,m){this._calculatorService=e,this._ingredientStoreService=l,this._AuthService=c,this.dialog=m,this.displayedColumns=["name","gram","ccal","protein","carbon","fat","delete"]}ngOnInit(){this._sub=this._AuthService.user.subscribe(e=>this.isAuthorized=!!e),this.isAuthorized&&this._sub.add(this._ingredientStoreService.fetchIngredients().subscribe(e=>{})),this._calculatorService.ingredientsChange.subscribe(e=>{this._calculatorService.ingredients=e,this.dataSource=[this._calculatorService.total.getValue(),...e]}),this._calculatorService.changeTotalData(this._calculatorService.ingredients),this._sub.add(this._calculatorService.total.subscribe(e=>{this.dataSource=[e,...this._calculatorService.ingredients]}))}ngOnDestroy(){this._sub.unsubscribe()}openDialogNewIngr(){this.dialog.open(b.k,{width:"250px",data:{checkbox:!0,calculator:!0,isAuth:this.isAuthorized}}).afterClosed().subscribe(l=>{})}openDialogSelectIngr(){this.dialog.open(Z,{width:"250px",data:{}}).afterClosed().subscribe(l=>{})}handleChangeWeight(e){this._calculatorService.changeIngredientData(e)}handleDelIngr(e){this._calculatorService.deleteIngr(e)}handleClearCalculator(){this._calculatorService.deleteAllIngr()}getTooltipInfo(e){return this._tooltipTemplate(e)}_tooltipTemplate(e){return`\n    ${e.name} (100 gr):\n    ${e.ccalPer100} ccal,\n    ${e.proteinPer100} pr,\n    ${e.carbonPer100} carb,\n    ${e.fatPer100} fat\n  `}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.R),t.Y36(S.q),t.Y36(A.e),t.Y36(u.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-calculator"]],decls:34,vars:4,consts:[[1,"buttons"],["mat-raised-button","",3,"click"],["mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","",1,"clearTable",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","gram",1,"gramContainer"],["matColumnDef","ccal"],["matColumnDef","protein"],["matColumnDef","carbon"],["matColumnDef","fat"],["matColumnDef","delete",1,"delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"nameCell"],["mat-icon-button","","color","accent","matTooltipPosition","right",3,"matTooltip",4,"ngIf"],["mat-icon-button","","color","accent","matTooltipPosition","right",3,"matTooltip"],["appearance","outline",1,"gram"],["matInput","","type","number","value","0","min","1",3,"readonly","ngModel","ngModelChange","change"],["gramOfElement","ngModel"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,l){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Calculator"),t.qZA(),t.TgZ(2,"h2"),t._uU(3,"Let's check your food for calories and nutrition "),t.qZA(),t.TgZ(4,"div",0)(5,"button",1),t.NdJ("click",function(){return l.openDialogNewIngr()}),t._uU(6," Create new ingredient "),t.qZA(),t.YNc(7,Y,2,0,"button",2),t.TgZ(8,"button",3),t.NdJ("click",function(){return l.handleClearCalculator()}),t._uU(9," Clear table "),t.qZA()(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,w,2,0,"th",6),t.YNc(13,D,5,2,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,J,2,0,"th",6),t.YNc(16,Q,4,2,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,$,2,0,"th",6),t.YNc(19,k,2,1,"td",7),t.BQk(),t.ynx(20,10),t.YNc(21,R,2,0,"th",6),t.YNc(22,q,2,1,"td",7),t.BQk(),t.ynx(23,11),t.YNc(24,z,2,0,"th",6),t.YNc(25,B,2,1,"td",7),t.BQk(),t.ynx(26,12),t.YNc(27,F,2,0,"th",6),t.YNc(28,H,2,1,"td",7),t.BQk(),t.ynx(29,13),t.YNc(30,j,1,0,"th",6),t.YNc(31,L,2,1,"td",7),t.BQk(),t.YNc(32,E,1,0,"tr",14),t.YNc(33,K,1,0,"tr",15),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",l.isAuthorized),t.xp6(3),t.Q6J("dataSource",l.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns))},dependencies:[s.O5,_.lW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,d.KE,y.Nt,I.Hw,N.gM,i.Fj,i.wV,i.JJ,i.qQ,i.On],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:200;padding:12px;margin:48px 0 0}[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:200;padding:12px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#673ab7}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-of-type){margin-right:16px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .clearTable[_ngcontent-%COMP%]{color:#f44336}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{width:98%;margin-top:32px;table-layout:fixed}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .nameCell[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .nameCell[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .nameCell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:50%}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:first-of-type{font-weight:700;background-color:#673ab714}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden;padding-right:16px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(2){padding-left:18px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type), [_nghost-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){width:14%!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-column-delete{width:60px!important}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:4px;margin:2px}[_nghost-%COMP%]   table[_ngcontent-%COMP%]     .mat-form-field-wrapper   .mat-form-field-infix{width:100%!important;padding:12px 8px 8px;border:0}"]}),n})(),X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,f.q,i.u5,T.a,M,C.Bz.forChild([{path:"",component:W}]),C.Bz]}),n})()}}]);